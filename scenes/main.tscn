[gd_scene load_steps=8 format=3 uid="uid://dxdx73k3pcw5t"]

[ext_resource type="Script" uid="uid://drv52qxljc4b0" path="res://scripts/presentation_manager.gd" id="1_o5qli"]
[ext_resource type="PackedScene" uid="uid://duimm05pw8ngk" path="res://scenes/prefabs/slide_button.tscn" id="2_0wfyh"]
[ext_resource type="PackedScene" uid="uid://dt8k4dbtsyj0o" path="res://scenes/prefabs/page_subviewport.tscn" id="3_sugp2"]
[ext_resource type="Script" uid="uid://calus87qprk6b" path="res://scripts/themes_list.gd" id="4_jyhfs"]
[ext_resource type="PackedScene" uid="uid://cb3246b2xfqtc" path="res://scenes/presenter_view.tscn" id="4_o6xl0"]
[ext_resource type="Script" uid="uid://44uiw2fma3fp" path="res://scripts/popup_menu_button.gd" id="4_tefeu"]
[ext_resource type="PackedScene" uid="uid://b04phw386lbcv" path="res://scenes/prefabs/theme_entry.tscn" id="5_tbgi4"]

[node name="Main" type="VBoxContainer" node_paths=PackedStringArray("main_slide_sorter", "main_slide_scroll", "slide_buttons_sorter", "text_editor", "editor_panel", "themes_view", "slides_view", "location_label", "open_file", "save_file")]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_o5qli")
main_slide_sorter = NodePath("Slides View/Main/Margins/Slides")
main_slide_scroll = NodePath("Slides View/Main")
slide_buttons_sorter = NodePath("Slides View/Slides/ScrollContainer/Sorter")
text_editor = NodePath("Editor Panel/Sorter/Editor")
editor_panel = NodePath("Editor Panel")
themes_view = NodePath("Themes")
slides_view = NodePath("Slides View")
location_label = NodePath("Editor Panel/Sorter/Location")
open_file = NodePath("Open File Dialog")
save_file = NodePath("Save File")
slide_button_scene = ExtResource("2_0wfyh")
page_subviewport = ExtResource("3_sugp2")
presentation = ExtResource("4_o6xl0")

[node name="Navbar" type="PanelContainer" parent="."]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1

[node name="Sorter" type="HBoxContainer" parent="Navbar"]
layout_mode = 2

[node name="Left" type="HBoxContainer" parent="Navbar/Sorter"]
layout_mode = 2
size_flags_horizontal = 3

[node name="file" type="MenuButton" parent="Navbar/Sorter/Left"]
layout_mode = 2
text = "file"
item_count = 4
popup/item_0/text = "Open Markdown File"
popup/item_0/id = 0
popup/item_1/text = "Save Markdown File"
popup/item_1/id = 1
popup/item_2/text = "Open New Markdown File (no undo!)"
popup/item_2/id = 2
popup/item_3/text = "Exit"
popup/item_3/id = 3
script = ExtResource("4_tefeu")

[node name="view" type="MenuButton" parent="Navbar/Sorter/Left"]
layout_mode = 2
text = "view"
item_count = 1
popup/item_0/text = "Start Presentation"
popup/item_0/id = 0
popup/item_0/disabled = true
script = ExtResource("4_tefeu")

[node name="Center" type="HBoxContainer" parent="Navbar/Sorter"]
layout_mode = 2
size_flags_horizontal = 3
alignment = 1

[node name="Tabs" type="TabBar" parent="Navbar/Sorter/Center"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 4
current_tab = 0
tab_alignment = 1
tab_count = 3
tab_0/title = "slides"
tab_1/title = "edit"
tab_2/title = "themes"

[node name="Right" type="HBoxContainer" parent="Navbar/Sorter"]
layout_mode = 2
size_flags_horizontal = 3
alignment = 2

[node name="Refresh" type="Button" parent="Navbar/Sorter/Right"]
layout_mode = 2
text = "refresh"

[node name="Slides View" type="HBoxContainer" parent="."]
layout_mode = 2
size_flags_vertical = 3

[node name="Slides" type="PanelContainer" parent="Slides View"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.2

[node name="ScrollContainer" type="ScrollContainer" parent="Slides View/Slides"]
layout_mode = 2

[node name="Sorter" type="VBoxContainer" parent="Slides View/Slides/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Main" type="ScrollContainer" parent="Slides View"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
horizontal_scroll_mode = 0

[node name="Margins" type="MarginContainer" parent="Slides View/Main"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/margin_left = 50
theme_override_constants/margin_top = 50
theme_override_constants/margin_right = 50
theme_override_constants/margin_bottom = 50

[node name="Slides" type="VBoxContainer" parent="Slides View/Main/Margins"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Starting Text" type="RichTextLabel" parent="Slides View/Main/Margins/Slides"]
layout_mode = 2
size_flags_vertical = 3
bbcode_enabled = true
text = "Welcome to GMDP! 
If you're reading this, you have no presentation configured. 

You can start editing a new presentation from scratch by going to the edit tab. 

You can open existing markdown files as a presentation from the File menu.

I hope you enjoy GMDP!"

[node name="Editor Panel" type="PanelContainer" parent="."]
visible = false
layout_mode = 2
size_flags_vertical = 3

[node name="Sorter" type="VBoxContainer" parent="Editor Panel"]
layout_mode = 2
size_flags_vertical = 3

[node name="Editor" type="TextEdit" parent="Editor Panel/Sorter"]
layout_mode = 2
size_flags_vertical = 3
placeholder_text = "Basic markdown syntax such at italic are supported here."

[node name="Location" type="RichTextLabel" parent="Editor Panel/Sorter"]
layout_mode = 2
bbcode_enabled = true
text = "NOT SAVING ANYWHERE"
fit_content = true

[node name="Themes" type="PanelContainer" parent="." node_paths=PackedStringArray("theme_list", "theme_name_label", "theme_by_label", "title_page", "heading_page", "subtitle_page", "selection_button", "url_button")]
visible = false
layout_mode = 2
size_flags_vertical = 3
script = ExtResource("4_jyhfs")
themes_path = "res://templates"
theme_list = NodePath("Sorter/List")
theme_name_label = NodePath("Sorter/Info/Name")
theme_by_label = NodePath("Sorter/Info/By")
title_page = NodePath("Sorter/Info/Previews/Title")
heading_page = NodePath("Sorter/Info/Previews/Heading")
subtitle_page = NodePath("Sorter/Info/Previews/Subtitle")
selection_button = NodePath("Sorter/Info/Buttons/Use")
url_button = NodePath("Sorter/Info/Buttons/URL")
theme_entry = ExtResource("5_tbgi4")

[node name="Sorter" type="HBoxContainer" parent="Themes"]
layout_mode = 2

[node name="List" type="VBoxContainer" parent="Themes/Sorter"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.4

[node name="Info" type="VBoxContainer" parent="Themes/Sorter"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Name" type="RichTextLabel" parent="Themes/Sorter/Info"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1
text = "NO THEME SELECTED"

[node name="By" type="RichTextLabel" parent="Themes/Sorter/Info"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1
text = "Authored by WinnerWind and designed by WinnerWind on 2025-09-06. Version 1.1.1"

[node name="Previews" type="GridContainer" parent="Themes/Sorter/Info"]
layout_mode = 2
size_flags_vertical = 3
columns = 2

[node name="Title" parent="Themes/Sorter/Info/Previews" instance=ExtResource("3_sugp2")]
visible = false
layout_mode = 2

[node name="Heading" parent="Themes/Sorter/Info/Previews" instance=ExtResource("3_sugp2")]
visible = false
layout_mode = 2

[node name="Subtitle" parent="Themes/Sorter/Info/Previews" instance=ExtResource("3_sugp2")]
visible = false
layout_mode = 2

[node name="Buttons" type="HBoxContainer" parent="Themes/Sorter/Info"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1
alignment = 2

[node name="Use" type="Button" parent="Themes/Sorter/Info/Buttons"]
visible = false
layout_mode = 2
text = "use this theme"

[node name="URL" type="Button" parent="Themes/Sorter/Info/Buttons"]
visible = false
layout_mode = 2
text = "open url"

[node name="Open File Dialog" type="FileDialog" parent="."]
title = "Open a File"
position = Vector2i(0, 36)
ok_button_text = "Open"
file_mode = 0
filters = PackedStringArray("*.md", "*.txt")
use_native_dialog = true

[node name="Save File" type="FileDialog" parent="."]
filters = PackedStringArray("*.md", "*.txt")
use_native_dialog = true

[connection signal="id_pressed" from="Navbar/Sorter/Left/file" to="." method="file_menu_functions"]
[connection signal="id_pressed" from="Navbar/Sorter/Left/view" to="." method="view_menu_functions"]
[connection signal="tab_changed" from="Navbar/Sorter/Center/Tabs" to="." method="_on_tabs_tab_changed"]
[connection signal="pressed" from="Navbar/Sorter/Right/Refresh" to="." method="refresh"]
[connection signal="text_changed" from="Editor Panel/Sorter/Editor" to="." method="set_text_content"]
[connection signal="switch_theme_to" from="Themes" to="." method="switch_theme_to"]
[connection signal="pressed" from="Themes/Sorter/Info/Buttons/Use" to="Themes" method="use_theme"]
[connection signal="pressed" from="Themes/Sorter/Info/Buttons/URL" to="Themes" method="open_url"]
[connection signal="file_selected" from="Open File Dialog" to="." method="set_file_path"]
[connection signal="file_selected" from="Save File" to="." method="save"]
